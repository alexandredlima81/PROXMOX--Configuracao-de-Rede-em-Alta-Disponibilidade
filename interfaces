# network interface settings; autogenerated
# Please do NOT modify this file directly, unless you know what
# you're doing.
#
# If you want to manage parts of the network configuration manually,
# please utilize the 'source' or 'source-directory' directives to do
# so.
# PVE will preserve these directives, but will NOT read its network
# configuration from sourced files, so do not attempt to move any of
# the PVE managed interfaces into external files!

## Definindo as interfaces Físicas

# Configuração da interface loopback
auto lo
iface lo inet loopback

# Configuração da interface física enp2s0 (não atribui IP, apenas configura manualmente)
iface enp2s0 inet manual
	mtu 1500

# Configuração da interface física enp6s0f0 (não atribui IP, apenas configura manualmente)
auto enp6s0f0
iface enp6s0f0 inet manual
	mtu 1500

# Configuração da interface física enp6s0f1 (não atribui IP, apenas configura manualmente)
auto enp6s0f1
iface enp6s0f1 inet manual
	mtu 1500

## Definindo a interface Bound

# Configuração do bonding (agregação de interfaces físicas enp6s0f0 e enp6s0f1)
auto bond0
iface bond0 inet manual
	bond-slaves enp6s0f0 enp6s0f1
	bond-miimon 100
	bond-mode 802.3ad
	bond-xmit-hash-policy layer2+3
	mtu 1500

## Definindo as Bridges das Redes

# Configuração do bridge vmbr0, para rede principal
auto vmbr0
iface vmbr0 inet static
	address 192.168.18.200/24
	gateway 192.168.18.1
	bridge-ports bond0
	bridge-stp off
	bridge-fd 0
	mtu 1500

# Configuração do bridge vmbr200, para rede DMZ (VLAN 200)
auto vmbr200
iface vmbr200 inet manual
	bridge-ports bond0.200
	bridge-stp off
	bridge-fd 0
	mtu 1500

# Configuração do bridge vmbr300, para rede de servidores (VLAN 300)
auto vmbr300
iface vmbr300 inet manual
	bridge-ports bond0.300
	bridge-stp off
	bridge-fd 0
	mtu 1500

# Configuração do bridge vmbr400, para rede administrativa (VLAN 40
auto vmbr400
iface vmbr400 inet manual
	bridge-ports bond0.400
	bridge-stp off
	bridge-fd 0
	mtu 1500

# Definindo as VLANs no bond0
auto bond0.200
iface bond0.200 inet manual
    vlan-raw-device bond0

auto bond0.300
iface bond0.300 inet manual
    vlan-raw-device bond0

auto bond0.400
iface bond0.400 inet manual
    vlan-raw-device bond0


# Carrega configurações adicionais de rede de outros arquivos
source /etc/network/interfaces.d/*
